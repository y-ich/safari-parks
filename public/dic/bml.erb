<%# coding: UTF-8 %>
<%
require 'uri'

def bookmarklet filename
  File.open(filename, 'r') do |file|
    URI.encode(file.read, /[^^-_.!~*'()a-zA-Z\d;\\\/?:@&=+$,\[\]%\{\}<>]/)
  end
end
%>
<!DOCTYPE html>
<html>
  <head>
<title>英和辞書</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<script type="text/javascript">
function pronounce_bookmarklet() {
  document.location = 'bml2.html#' + "<%= bookmarklet 'bookmarklets/pronounce.min.js' %>";
}
</script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-510249-12']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>
<body>
<h2>インストールの続き</h2>
<h3>パソコンの場合</h3>
<p>
2. 以下のリンクをブックマークバーまでドラッグしてドロップしてください。</br>
<script type="text/javascript">
  document.write('<a href="' + document.location.toString().split('#')[1] + '">英和辞書</a>');
</script>
</p><p>
注意：OS XのSafariではドラッグ＆ドロップではインストールできないようです。(日本語コードの問題のようです。)以下の手順でインストールしてください。
</p>
<h3>iPadの場合</h3>
2. このページをブックマークします。<br>
ブックマークの場所はブックマークバーフォルダがお勧めです。
ブックマークの名前は適当に変えてください。
</p><p>
3. ブックマークの編集で、登録したブックマークのアドレスで、先頭から最初の#(シャープ、その隣はjavascript)までを削除してください。
</p>

<h2>発音用ブックマークレット</h2>
iPadの場合、単語の発音が聞けるようにするにはもう１つブックマークレットをインストールしてください。
パソコンの場合はこのブックッマークレットはインストール不要です。単語を調べた後、発音を聞くにはOKボタンを、聞かない時にはキャンセルボタンを押してください。
</p><p>
では、発音用ブックマークレットを登録します。<br>
4. 下のボタンをタップすると、ページが変わりますのでそのページでインストールを続けてください。
</p><p>
<form action="">
<input type="button" value="発音ブックマークレット" onclick="pronounce_bookmarklet();">
</form>
</p>
</body>
</html>
